<template name="chatroom">
  <div id="chat-container" class="container-fluid">
    <div id="chat-wrapper">

      <div class="row-fluid">
        <h3>Chat</h3>
      </div>

      <div id="messages" class="row-fluid">
        {{#each msgs}}
        <p>
          {{#with getProfile owner}}
            <a href="{{url}}" target="_blank"><img class="img-circle" src="{{pic_square}}" onerror="this.src='{{defaultProfilePicture}}';this.removeAttribute('onerror');"/>{{name.givenName}} {{name.familyName}}</a>
          {{/with}}
          {{action}}:
        </p>
        <p>
          {{msg}}
        </p>
        {{/each}}
      </div>

      <div id="msg-input" class="row-fluid">
        <textarea class="form-control" rows="4" type="text"></textarea>
      </div>

      <div id="chat-info" class="row-fluid">
        <div class="messages-counter col-md-1">
          500
        </div>
        <div class="online-users col-md-offset-4 col-md-3">
          <button class="btn btn-default" title="Users online"><i class="fa fa-users"></i></button>
        </div>
        <div class="no-padding col-md-4">
          <button class="send-msg btn btn-color">
            Send
          </button>
        </div>
      </div>

      <div id="users-list" style="display: none;">
        <h5>Users online</h5>
        <ul>
          {{#each onlineUsers}}
            {{#with superchat}}
              <li><a href="{{url}}" target="_blank"><img class="img-circle" src="{{pic_square}}" onerror="this.src='{{defaultProfilePicture}}';this.removeAttribute('onerror');" />{{$or name.givenName ../profile.name}} {{name.familyName}}</a></li>
            {{/with}}
          {{/each}}
        </ul>
      </div>
    </div>
  </div>
</template>
